"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2572],{2572:(T,P,d)=>{d.r(P),d.d(P,{CameraPageModule:()=>x});var v=d(177),E=d(4341),u=d(5150),b=d(8986),m=d(467),f=d(7464),h=function(r){return r.Prompt="PROMPT",r.Camera="CAMERA",r.Photos="PHOTOS",r}(h||{}),g=function(r){return r.Rear="REAR",r.Front="FRONT",r}(g||{}),y=function(r){return r.Uri="uri",r.Base64="base64",r.DataUrl="dataUrl",r}(y||{});class C extends f.E_{getPhoto(e){var i=this;return(0,m.A)(function*(){return new Promise(function(){var t=(0,m.A)(function*(a,o){if(e.webUseInput||e.source===h.Photos)i.fileInputExperience(e,a,o);else if(e.source===h.Prompt){let c=document.querySelector("pwa-action-sheet");c||(c=document.createElement("pwa-action-sheet"),document.body.appendChild(c)),c.header=e.promptLabelHeader||"Photo",c.cancelable=!1,c.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],c.addEventListener("onSelection",function(){var s=(0,m.A)(function*(l){0===l.detail?i.fileInputExperience(e,a,o):i.cameraExperience(e,a,o)});return function(l){return s.apply(this,arguments)}}())}else i.cameraExperience(e,a,o)});return function(a,o){return t.apply(this,arguments)}}())})()}pickImages(e){var i=this;return(0,m.A)(function*(){return new Promise(function(){var t=(0,m.A)(function*(a,o){i.multipleFileInputExperience(a,o)});return function(a,o){return t.apply(this,arguments)}}())})()}cameraExperience(e,i,t){var a=this;return(0,m.A)(function*(){if(customElements.get("pwa-camera-modal")){const o=document.createElement("pwa-camera-modal");o.facingMode=e.direction===g.Front?"user":"environment",document.body.appendChild(o);try{yield o.componentOnReady(),o.addEventListener("onPhoto",function(){var c=(0,m.A)(function*(s){const l=s.detail;null===l?t(new f.I9("User cancelled photos app")):l instanceof Error?t(l):i(yield a._getCameraPhoto(l,e)),o.dismiss(),document.body.removeChild(o)});return function(s){return c.apply(this,arguments)}}()),o.present()}catch{a.fileInputExperience(e,i,t)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),a.fileInputExperience(e,i,t)})()}fileInputExperience(e,i,t){let a=document.querySelector("#_capacitor-camera-input");const o=()=>{var c;null===(c=a.parentNode)||void 0===c||c.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",c=>{const s=a.files[0];let l="jpeg";if("image/png"===s.type?l="png":"image/gif"===s.type&&(l="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const p=new FileReader;p.addEventListener("load",()=>{if("dataUrl"===e.resultType)i({dataUrl:p.result,format:l});else if("base64"===e.resultType){const A=p.result.split(",")[1];i({base64String:A,format:l})}o()}),p.readAsDataURL(s)}else i({webPath:URL.createObjectURL(s),format:l}),o()}),a.addEventListener("cancel",c=>{t(new f.I9("User cancelled photos app")),o()})),a.accept="image/*",a.capture=!0,e.source===h.Photos||e.source===h.Prompt?a.removeAttribute("capture"):e.direction===g.Front?a.capture="user":e.direction===g.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(e,i){let t=document.querySelector("#_capacitor-camera-input-multiple");const a=()=>{var o;null===(o=t.parentNode)||void 0===o||o.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input-multiple",t.type="file",t.hidden=!0,t.multiple=!0,document.body.appendChild(t),t.addEventListener("change",o=>{const c=[];for(let s=0;s<t.files.length;s++){const l=t.files[s];let p="jpeg";"image/png"===l.type?p="png":"image/gif"===l.type&&(p="gif"),c.push({webPath:URL.createObjectURL(l),format:p})}e({photos:c}),a()}),t.addEventListener("cancel",o=>{i(new f.I9("User cancelled photos app")),a()})),t.accept="image/*",t.click()}_getCameraPhoto(e,i){return new Promise((t,a)=>{const o=new FileReader,c=e.type.split("/")[1];"uri"===i.resultType?t({webPath:URL.createObjectURL(e),format:c,saved:!1}):(o.readAsDataURL(e),o.onloadend=()=>{const s=o.result;t("dataUrl"===i.resultType?{dataUrl:s,format:c,saved:!1}:{base64String:s.split(",")[1],format:c,saved:!1})},o.onerror=s=>{a(s)})})}checkPermissions(){var e=this;return(0,m.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw e.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw e.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var e=this;return(0,m.A)(function*(){throw e.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var e=this;return(0,m.A)(function*(){throw e.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var e=this;return(0,m.A)(function*(){throw e.unavailable("Not implemented on web.")})()}}new C;const w=(0,f.F3)("Camera",{web:()=>new C});var n=d(3953),U=d(345);function R(r,e){if(1&r&&n.nrm(0,"img",8),2&r){const i=n.XpG(2);n.Y8G("src",i.photo,n.B4B)}}function F(r,e){if(1&r&&(n.j41(0,"ion-card")(1,"ion-card-header"),n.EFF(2," Captura de Foto "),n.k0s(),n.j41(3,"ion-card-content"),n.DNE(4,R,1,1,"img",7),n.k0s()()),2&r){const i=n.XpG();n.R7$(4),n.Y8G("ngIf",i.photo)}}const I=[{path:"",component:(()=>{var r;class e{constructor(t){this.sanitizer=t}ngOnInit(){}takePicture(){var t=this;return(0,m.A)(function*(){try{const a=yield w.getPhoto({quality:90,allowEditing:!0,resultType:y.Uri});t.photo=t.sanitizer.bypassSecurityTrustResourceUrl(a.webPath)}catch(a){console.error("Error al tomar la foto",a)}})()}}return(r=e).\u0275fac=function(t){return new(t||r)(n.rXU(U.up))},r.\u0275cmp=n.VBU({type:r,selectors:[["app-camera"]],decls:15,vars:3,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["collapse","condense"],["size","large"],["expand","block",3,"click"],[4,"ngIf"],["width","100%",3,"src",4,"ngIf"],["width","100%",3,"src"]],template:function(t,a){1&t&&(n.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),n.EFF(3,"C\xe1mara"),n.k0s(),n.j41(4,"ion-buttons",1),n.nrm(5,"ion-menu-button")(6,"ion-back-button"),n.k0s()()(),n.j41(7,"ion-content",2)(8,"ion-header",3)(9,"ion-toolbar")(10,"ion-title",4),n.EFF(11,"Captura de c\xe1mara"),n.k0s()()(),n.j41(12,"ion-button",5),n.bIt("click",function(){return a.takePicture()}),n.EFF(13,"Tomar Foto"),n.k0s(),n.DNE(14,F,5,1,"ion-card",6),n.k0s()),2&t&&(n.Y8G("translucent",!0),n.R7$(7),n.Y8G("fullscreen",!0),n.R7$(7),n.Y8G("ngIf",a.photo))},dependencies:[v.bT,u.Jm,u.QW,u.b_,u.I9,u.ME,u.W9,u.eU,u.MC,u.BC,u.ai,u.el]}),e})()}];let L=(()=>{var r;class e{}return(r=e).\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.$C({type:r}),r.\u0275inj=n.G2t({imports:[b.iI.forChild(I),b.iI]}),e})(),x=(()=>{var r;class e{}return(r=e).\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.$C({type:r}),r.\u0275inj=n.G2t({imports:[v.MD,E.YN,u.bv,L]}),e})()}}]);